{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import { existsSync, readFileSync } from 'fs';\nimport { renderString } from 'nunjucks';\nimport * as fs from 'fs';\n\nexport type CreateItem = {\n  name: string;\n  params?: Record<string, any>;\n};\n\nexport class RenderTemplate {\n  constructor(\n    protected src: string,\n    protected ext = '.twig',\n  ) {}\n\n  render(name: string, params: Record<string, any> = {}) {\n    const src = (this.src + '/' + name + this.ext).replaceAll('//', '/');\n    if (!existsSync(src)) return '';\n\n    try {\n      return renderString(readFileSync(src).toString(), params);\n    } catch (error) {\n      console.error(error);\n      return '';\n    }\n  }\n\n  style() {\n    const src = (this.src + '/' + 'style.css').replaceAll('//', '/');\n    if (!existsSync(src)) return '';\n    return `<style>${fs.readFileSync(src).toString()}</style>`;\n  }\n\n  create(className: string, params: Record<string, any>, ...records: CreateItem[]) {\n    const result: string[] = [];\n    result.push(this.style());\n    result.push(`<div class=\"${className}\">`);\n\n    for (const record of records) {\n      result.push(this.render(record.name, record.params ?? params));\n    }\n\n    result.push('</div>');\n\n    return result.join('\\r\\n');\n  }\n}\n"],"mappings":";AAAA,SAAS,YAAY,oBAAoB;AACzC,SAAS,oBAAoB;AAC7B,YAAY,QAAQ;AAOb,IAAM,iBAAN,MAAqB;AAAA,EAC1B,YACY,KACA,MAAM,SAChB;AAFU;AACA;AAAA,EACT;AAAA,EAEH,OAAO,MAAc,SAA8B,CAAC,GAAG;AACrD,UAAM,OAAO,KAAK,MAAM,MAAM,OAAO,KAAK,KAAK,WAAW,MAAM,GAAG;AACnE,QAAI,CAAC,WAAW,GAAG,EAAG,QAAO;AAE7B,QAAI;AACF,aAAO,aAAa,aAAa,GAAG,EAAE,SAAS,GAAG,MAAM;AAAA,IAC1D,SAAS,OAAO;AACd,cAAQ,MAAM,KAAK;AACnB,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,QAAQ;AACN,UAAM,OAAO,KAAK,MAAM,cAAmB,WAAW,MAAM,GAAG;AAC/D,QAAI,CAAC,WAAW,GAAG,EAAG,QAAO;AAC7B,WAAO,UAAa,gBAAa,GAAG,EAAE,SAAS,CAAC;AAAA,EAClD;AAAA,EAEA,OAAO,WAAmB,WAAgC,SAAuB;AAjCnF;AAkCI,UAAM,SAAmB,CAAC;AAC1B,WAAO,KAAK,KAAK,MAAM,CAAC;AACxB,WAAO,KAAK,eAAe,SAAS,IAAI;AAExC,eAAW,UAAU,SAAS;AAC5B,aAAO,KAAK,KAAK,OAAO,OAAO,OAAM,YAAO,WAAP,YAAiB,MAAM,CAAC;AAAA,IAC/D;AAEA,WAAO,KAAK,QAAQ;AAEpB,WAAO,OAAO,KAAK,MAAM;AAAA,EAC3B;AACF;","names":[]}